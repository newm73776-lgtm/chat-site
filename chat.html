<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GlassChat - Messages</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="chat-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="current-user">
                    <div class="current-user-avatar" id="currentUserAvatar">U</div>
                    <span class="current-user-name" id="currentUserName">User</span>
                </div>
                <div class="search-container">
                    <input type="text" class="search-input" id="userSearch" placeholder="Search users...">
                    <span class="search-icon">ğŸ”</span>
                    <div class="search-results" id="searchResults"></div>
                </div>
            </div>
            
            <div class="chats-list" id="chatsList">
                <!-- World Chat Button -->
                <div class="chat-item" id="worldChatItem" onclick="enterWorldChat()">
                    <div class="chat-item-avatar" style="background: linear-gradient(135deg, #ff6b6b, #feca57);">ğŸŒ</div>
                    <div class="chat-item-info">
                        <div class="chat-item-header">
                            <span class="chat-item-name">World Chat</span>
                        </div>
                        <div class="chat-item-preview">Chat with everyone</div>
                    </div>
                </div>
                
                <!-- Recent chats will be populated here -->
                <div class="empty-chat" id="emptyChats" style="display: none;">
                    <div class="empty-chat-icon">ğŸ’¬</div>
                    <p>No private conversations yet</p>
                    <p style="font-size: 13px; margin-top: 8px;">Search for a user to start chatting</p>
                </div>
            </div>
        </aside>

        <!-- Main Chat Area -->
        <main class="main-chat" id="mainChat">
            <!-- Chat Header -->
            <header class="chat-header" id="chatHeader" style="display: none;">
                <button class="back-button" id="backButton">â†</button>
                <div class="chat-header-avatar" id="chatHeaderAvatar">R</div>
                <div class="chat-header-info">
                    <div class="chat-header-name" id="chatHeaderName">Receiver</div>
                    <div class="chat-header-status" id="chatHeaderStatus">offline</div>
                </div>
                <div class="chat-header-actions">
                    <button class="header-button" id="moreButton">â‹®</button>
                </div>
            </header>

            <!-- Welcome Screen (shown when no chat selected) -->
            <div class="welcome-screen" id="welcomeScreen">
                <div class="welcome-icon">ğŸ’</div>
                <h2 class="welcome-title">GlassChat</h2>
                <p class="welcome-text">Select a conversation from the sidebar or search for a user to start a private chat.</p>
            </div>

            <!-- Messages Container -->
            <div class="messages-container" id="messagesContainer" style="display: none;"></div>

            <!-- Input Area -->
            <div class="input-container" id="inputContainer" style="display: none;">
                <div style="position: relative;">
                    <!-- Emoji Picker -->
                    <div class="emoji-picker-container" id="emojiPicker">
                        <div class="emoji-categories">
                            <button class="emoji-category active" data-category="smileys">ğŸ˜Š</button>
                            <button class="emoji-category" data-category="people">ğŸ‘‹</button>
                            <button class="emoji-category" data-category="animals">ğŸ±</button>
                            <button class="emoji-category" data-category="food">ğŸ</button>
                            <button class="emoji-category" data-category="travel">ğŸš—</button>
                            <button class="emoji-category" data-category="objects">ğŸ’¡</button>
                            <button class="emoji-category" data-category="symbols">â¤ï¸</button>
                            <button class="emoji-category" data-category="flags">ğŸ³ï¸</button>
                        </div>
                        <div class="emoji-grid" id="emojiGrid"></div>
                    </div>
                </div>
                
                <div class="input-wrapper">
                    <button class="input-button" id="emojiButton">ğŸ˜Š</button>
                    <button class="input-button" id="attachmentButton">ğŸ“</button>
                    <textarea class="message-input" id="messageInput" placeholder="Type a message..." rows="1"></textarea>
                    <button class="send-button" id="sendButton">â¤</button>
                </div>
                <input type="file" class="file-input" id="fileInput" accept="image/*,video/*">
            </div>
        </main>
    </div>

    <!-- Lightbox Modal -->
    <div class="lightbox" id="lightbox">
        <button class="lightbox-close" id="lightboxClose">Ã—</button>
        <div class="lightbox-content" id="lightboxContent"></div>
        <div class="lightbox-actions">
            <button class="lightbox-button" id="downloadButton">â¬‡ Download</button>
            <button class="lightbox-button" id="shareButton">â†— Share</button>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    
    <script src="firebase.js"></script>
    <script src="chat.js"></script>
</body>
</html>
